# See http://dev.swig505.com/2007/06/30/creating-a-ruby-gem/ for a Ruby
# Gem-making tutorial.

require 'rake'
require 'rake/testtask'
require 'rake/gempackagetask'
require 'fileutils'

include FileUtils

task :default => :test

spec = Gem::Specification.new do |s|
  s.name = "activerdf_agraph"
  s.version = "0.0.0"
  s.author = "Eric Kidd"
  s.email = "emk@rubyforge.org"
  s.homepage = "http://activerdfagraph.rubyforge.org/"
  s.platform = Gem::Platform::RUBY
  s.summary = "Support for accessing AllegroGraph using ActiveRDF"
  s.files = FileList["{bin,lib,examples}/**/*"].to_a
  s.require_path = "lib"
  s.autorequire = "activerdf_agraph"
  s.test_files = Dir.glob('test/*_test.rb')
  s.has_rdoc = true
  s.extra_rdoc_files = ["README"]
  s.add_dependency("activerdf", ">= 1.6.6")
  s.add_dependency("activerdf_sparql", ">= 1.3.4")
  s.add_dependency("builder", ">= 2.1.2")
  # The activerdf gem doesn't mention this dependency, so we'll include it
  # ourselves.
  s.add_dependency("uuidtools", ">= 1.0.1")
end

Rake::GemPackageTask.new(spec) do |pkg|
  pkg.need_tar = false
end

Rake::TestTask.new do |t|
  t.libs = [spec.require_path]
  t.test_files = spec.test_files
end

desc "Convert example data to various formats"
task :example_data do
  cd "examples" do
    sh "rapper -g foaf.ttl > foaf.nt"
    sh "rapper -g foaf.ttl -o rdfxml-abbrev > foaf.rdf"
  end
end
